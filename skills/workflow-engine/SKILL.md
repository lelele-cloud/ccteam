---
name: workflow-engine
description: CCTeam流程引擎核心技能。使用场景：(1) 初始化项目状态 (2) 管理阶段流转 (3) 处理评审结果 (4) 并行阶段控制 (5) 异常处理。整个工作流系统的核心控制中心。
---

# 流程引擎 (Workflow Engine)

流程引擎是CCTeam的核心控制中心，负责管理项目开发的10个阶段，实现自动流转、评审关卡和状态持久化。

## 触发条件

| 触发点 | 说明 |
|--------|------|
| `/ccteam-new` | 新项目启动，初始化状态 |
| `/ccteam-resume` | 恢复项目，加载状态 |
| `/ccteam-stage` | 阶段控制命令 |
| 评审完成 | 处理评审结果 |

## 核心操作

### 1. 初始化项目状态

生成 `project-status.json`，包含项目信息、当前阶段、阶段列表、问题列表、指标等。

### 2. 启动阶段

1. 检查前置条件
2. 更新状态为 in-progress
3. 加载对应智能体
4. 创建阶段工作目录
5. 记录日志

### 3. 完成阶段

1. 验证产出物
2. 更新状态为 review
3. 记录产出物
4. 触发评审

### 4. 评审处理

**通过**：标记完成、解锁下一阶段、自动启动

**不通过**：创建Issue、通知负责人、等待修改

### 5. 并行阶段

阶段6（前端）和阶段7（后端）支持并行执行，两者都完成后启动阶段8（测试）。

## 状态文件

| 文件 | 路径 | 用途 |
|------|------|------|
| 项目状态 | `docs/ccteam/project-status.json` | 持久化状态 |
| 工作流日志 | `docs/ccteam/workflow.log` | 记录事件 |
| Issues | `docs/ccteam/issues/` | 存放问题 |

详细API见 [references/engine-api.md](references/engine-api.md)
