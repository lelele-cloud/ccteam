# 代码评审检查清单

## 评审信息

| 属性 | 值 |
|------|-----|
| 项目名称 | {{project_name}} |
| PR/MR编号 | #XXX |
| 评审日期 | {{date}} |
| 评审人 | - |
| 开发人员 | - |

---

## 1. 代码质量

### 1.1 代码规范

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 代码格式符合项目规范 | - | ESLint/Prettier通过 |
| [ ] 命名清晰有意义 | - | 变量、函数、类命名规范 |
| [ ] 注释适当且有价值 | - | 复杂逻辑有必要注释 |
| [ ] 没有硬编码的魔法数字 | - | 使用常量替代 |
| [ ] 没有无用的代码和注释 | - | 删除调试代码和注释 |

### 1.2 代码结构

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 函数职责单一 | - | 每个函数只做一件事 |
| [ ] 函数长度合理 | - | 一般不超过50行 |
| [ ] 嵌套层级合理 | - | 一般不超过3层 |
| [ ] 代码重复度低 | - | 遵循DRY原则 |
| [ ] 模块划分合理 | - | 高内聚低耦合 |

### 1.3 可读性

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 代码逻辑清晰易懂 | - | - |
| [ ] 复杂逻辑有说明 | - | - |
| [ ] 参数和返回值类型明确 | - | TypeScript类型定义 |

---

## 2. 功能正确性

### 2.1 需求实现

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 功能符合需求描述 | - | 对照PRD检查 |
| [ ] 边界条件已处理 | - | - |
| [ ] 异常场景已考虑 | - | - |
| [ ] 向后兼容性 | - | 不破坏现有功能 |

### 2.2 逻辑正确性

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 算法逻辑正确 | - | - |
| [ ] 条件判断正确 | - | 无逻辑漏洞 |
| [ ] 循环边界正确 | - | 无死循环风险 |
| [ ] 空值处理正确 | - | null/undefined检查 |

---

## 3. 安全性

### 3.1 输入验证

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 所有输入已验证 | - | 前后端都需验证 |
| [ ] 防SQL注入 | - | 使用参数化查询 |
| [ ] 防XSS攻击 | - | 输出编码 |
| [ ] 防CSRF攻击 | - | Token验证 |

### 3.2 权限控制

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 接口权限验证 | - | - |
| [ ] 资源访问控制 | - | 防止越权访问 |
| [ ] 敏感操作审计 | - | 记录操作日志 |

### 3.3 数据安全

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 敏感数据加密 | - | 密码等敏感信息 |
| [ ] 日志脱敏 | - | 不打印敏感信息 |
| [ ] 密钥管理安全 | - | 不硬编码密钥 |

---

## 4. 性能

### 4.1 数据库操作

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 查询效率 | - | 使用索引，避免全表扫描 |
| [ ] 避免N+1查询 | - | 使用预加载 |
| [ ] 合理使用事务 | - | - |
| [ ] 大数据量分页 | - | - |

### 4.2 资源使用

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 内存使用合理 | - | 避免内存泄漏 |
| [ ] 连接池使用 | - | 复用数据库连接 |
| [ ] 缓存策略合理 | - | - |
| [ ] 文件资源释放 | - | 及时关闭文件句柄 |

### 4.3 网络请求

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 请求超时设置 | - | - |
| [ ] 重试机制 | - | - |
| [ ] 并发控制 | - | 避免请求风暴 |

---

## 5. 错误处理

### 5.1 异常处理

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 异常捕获合理 | - | 不吞掉异常 |
| [ ] 错误信息友好 | - | 用户可理解 |
| [ ] 错误日志记录 | - | 记录足够调试信息 |
| [ ] 异常传播正确 | - | - |

### 5.2 边界处理

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 空值检查 | - | - |
| [ ] 数组越界检查 | - | - |
| [ ] 类型检查 | - | - |

---

## 6. 测试

### 6.1 单元测试

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 测试覆盖率达标 | - | 核心逻辑 >= 80% |
| [ ] 测试用例有效 | - | 不是为覆盖率而写 |
| [ ] 边界条件测试 | - | - |
| [ ] 异常场景测试 | - | - |

### 6.2 集成测试

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] API测试 | - | 接口功能验证 |
| [ ] 依赖服务Mock | - | - |

---

## 7. 文档

### 7.1 代码文档

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 公共API有文档 | - | JSDoc/TSDoc |
| [ ] 复杂逻辑有注释 | - | - |
| [ ] README更新 | - | 如有必要 |

### 7.2 变更记录

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] CHANGELOG更新 | - | 如有必要 |
| [ ] PR描述完整 | - | 说明变更内容 |

---

## 8. 部署相关

### 8.1 配置变更

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] 环境变量更新 | - | 新增配置已说明 |
| [ ] 数据库迁移 | - | 迁移脚本正确 |
| [ ] 依赖更新 | - | package.json变更 |

### 8.2 兼容性

| 检查项 | 状态 | 备注 |
|--------|------|------|
| [ ] API向后兼容 | - | 不破坏现有客户端 |
| [ ] 数据库向后兼容 | - | 支持回滚 |

---

## 评审结论

**评审结果：** ✅ 通过 / ⚠️ 需修改后通过 / ❌ 不通过

**待修改项：**
1.
2.
3.

**评审意见：**

---

## 变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0 | {{date}} | - | 初始版本 |
